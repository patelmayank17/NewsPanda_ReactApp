{"ast":null,"code":"import _regeneratorRuntime from\"C:/Newspanda/NewsPanda_ReactApp/newsapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Newspanda/NewsPanda_ReactApp/newsapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Newspanda/NewsPanda_ReactApp/newsapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Newspanda/NewsPanda_ReactApp/newsapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Newspanda/NewsPanda_ReactApp/newsapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Newspanda/NewsPanda_ReactApp/newsapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import NewsItem from'./NewsItem';import Spinner from'./Spinner';import PropTypes from'prop-types';import InfiniteScroll from\"react-infinite-scroll-component\";import pandalogo from'./pand.png';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(props){var _this;_classCallCheck(this,News);_this=_super.call(this,props);_this.captalizeStr=function(str){return str.charAt(0).toUpperCase()+str.slice(1);};_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apiKey=\").concat(_this.props.api_key,\"&page=\").concat(_this.state.page+1,\"&pagesize=\").concat(_this.props.pageSize);_this.setState({page:_this.state.page+1});_context.next=4;return fetch(url);case 4:data=_context.sent;_context.next=7;return data.json();case 7:parsedData=_context.sent;_this.setState({articles:_this.state.articles.concat(parsedData.articles),totalResults:parsedData.totalResults});console.log(parsedData);console.log(\"fetchmore\"+_this.state.page);case 11:case\"end\":return _context.stop();}},_callee);}));_this.state={articles:[],loading:true,page:1,totalResults:0,setProgress:0};document.title=\"\".concat(_this.captalizeStr(_this.props.category),\" - NewsPanda\");return _this;}_createClass(News,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:this.props.setProgress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apiKey=\").concat(this.props.api_key,\"&page=\").concat(this.state.page,\"&pagesize=\").concat(this.props.pageSize);this.setState({loading:true});_context2.next=5;return fetch(url);case 5:data=_context2.sent;this.props.setProgress(30);_context2.next=9;return data.json();case 9:parsedData=_context2.sent;this.props.setProgress(70);this.setState({articles:parsedData.articles,totalResults:parsedData.totalResults,loading:false});this.props.setProgress(100);console.log(parsedData);console.log(\"DidMount\"+this.state.page);case 15:case\"end\":return _context2.stop();}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"img-fluid text-center\",style:{margin:'15px 0px',marginTop:'80px'},children:[/*#__PURE__*/_jsx(\"img\",{className:\"\",src:pandalogo,alt:\"panda\",width:\"120px\",height:\"80px\"}),\"Top \",this.captalizeStr(this.props.category),\" Headlines\"]}),this.state.loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.state.totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.articles.map(function(element,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-2\",children:/*#__PURE__*/_jsx(NewsItem,{title:element.title.slice(0,45),description:element.description?element.description.slice(0,88):\" \",imgURL:element.urlToImage,newsURL:element.url,author:element.author,publishedAt:element.publishedAt,source:element.source.name})},index);})})})})]});}}]);return News;}(Component);News.defaultProps={coutry:'in',category:'general',pageSize:6,setProgress:0};News.propsTypes={country:PropTypes.string,category:PropTypes.string,api_key:PropTypes.string,pageSize:PropTypes.number};export{News as default};","map":{"version":3,"names":["React","Component","NewsItem","Spinner","PropTypes","InfiniteScroll","pandalogo","News","props","captalizeStr","str","charAt","toUpperCase","slice","fetchMoreData","url","country","category","api_key","state","page","pageSize","setState","fetch","data","json","parsedData","articles","concat","totalResults","console","log","loading","setProgress","document","title","margin","marginTop","length","map","element","index","description","urlToImage","author","publishedAt","source","name","defaultProps","coutry","propsTypes","string","number"],"sources":["C:/Newspanda/NewsPanda_ReactApp/newsapp/src/components/News.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport NewsItem from './NewsItem'\r\nimport Spinner from './Spinner'\r\nimport PropTypes from 'prop-types'\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport pandalogo from './pand.png'\r\n\r\nexport default class News extends Component {\r\n\r\n    static defaultProps = {\r\n        coutry: 'in',\r\n        category: 'general',\r\n        pageSize: 6,\r\n        setProgress: 0,\r\n    }\r\n\r\n    static propsTypes = {\r\n        country: PropTypes.string,\r\n        category: PropTypes.string,\r\n        api_key: PropTypes.string,\r\n        pageSize: PropTypes.number,\r\n    }\r\n\r\n    captalizeStr = (str) => {\r\n        return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            articles: [],\r\n            loading: true,\r\n            page: 1,\r\n            totalResults: 0,\r\n            setProgress: 0\r\n        }\r\n        document.title = `${this.captalizeStr(this.props.category)} - NewsPanda`\r\n    }\r\n    \r\n    async componentDidMount() {\r\n        this.props.setProgress(10)\r\n        const url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.api_key}&page=${this.state.page}&pagesize=${this.props.pageSize}`\r\n        this.setState({ loading: true })\r\n        let data = await fetch(url)\r\n        this.props.setProgress(30)\r\n        let parsedData = await data.json()\r\n        this.props.setProgress(70)\r\n        this.setState({\r\n            articles: parsedData.articles,\r\n            totalResults: parsedData.totalResults,\r\n            loading: false\r\n        })\r\n        this.props.setProgress(100)\r\n        console.log(parsedData)\r\n        console.log(\"DidMount\"+this.state.page)\r\n    }\r\n   \r\n    fetchMoreData = async () => {\r\n        const url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.api_key}&page=${this.state.page + 1}&pagesize=${this.props.pageSize}`\r\n        this.setState({ page: this.state.page + 1 })\r\n        let data = await fetch(url)\r\n        let parsedData = await data.json()\r\n        this.setState({\r\n            articles: this.state.articles.concat(parsedData.articles),\r\n            totalResults: parsedData.totalResults\r\n        })\r\n        console.log(parsedData)\r\n        console.log(\"fetchmore\"+ this.state.page)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <h1 className='img-fluid text-center' style={{ margin: '15px 0px', marginTop:'80px' }} >\r\n                    <img className='' src={pandalogo} alt=\"panda\" width=\"120px\" height=\"80px\" />\r\n                    Top {this.captalizeStr(this.props.category)} Headlines</h1>\r\n\r\n                {this.state.loading && <Spinner />}\r\n\r\n                <InfiniteScroll\r\n                    dataLength={this.state.articles.length}\r\n                    next={this.fetchMoreData}\r\n                    hasMore={this.state.articles.length !== this.state.totalResults}\r\n                    loader={<Spinner />}\r\n                >\r\n                    <div className=\"container\">\r\n                        <div className='row'>\r\n                            {this.state.articles.map((element, index) => {\r\n                                return <div className='col-md-4 my-2' key={index}>\r\n                                    <NewsItem title={element.title.slice(0, 45)} description={element.description ? element.description.slice(0, 88) : \" \"} imgURL={element.urlToImage} newsURL={element.url} author={element.author} publishedAt={element.publishedAt} source={element.source.name} />\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </InfiniteScroll>\r\n            </>\r\n        )\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}